(this["webpackJsonpgratitude-day"]=this["webpackJsonpgratitude-day"]||[]).push([[0],{30:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var r=a(1),i=a.n(r),n=a(20),s=a.n(n),c=a(24),o=(a(30),a(5)),l=a(6),d=a(9),h=a(8),u=a(0),j=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={now:Math.trunc((new Date).getTime()/1e3),date:"2021-02-26 18:00:00"},e}return Object(l.a)(a,[{key:"dateInMilliseconds",value:function(){return Math.trunc(Date.parse(this.state.date)/1e3)}},{key:"seconds",value:function(){return(this.dateInMilliseconds()-this.state.now)%60}},{key:"minutes",value:function(){return Math.trunc((this.dateInMilliseconds()-this.state.now)/60)%60}},{key:"hours",value:function(){return Math.trunc((this.dateInMilliseconds()-this.state.now)/60/60)%24}},{key:"days",value:function(){return Math.trunc((this.dateInMilliseconds()-this.state.now)/60/60/24)}},{key:"componentDidMount",value:function(){var e=this;window.setInterval((function(){e.setState({now:Math.trunc((new Date).getTime()/1e3)})}),1e3)}},{key:"render",value:function(){return Object(u.jsxs)("div",{id:"timer",children:[Object(u.jsx)("p",{children:"We open in"}),Object(u.jsxs)("h1",{children:[this.days()?this.days()+" d :":""," ",this.hours()," h :"," ",this.minutes()," m : ",this.seconds()," s"]}),Object(u.jsx)("span",{children:"just need to send existing mails..."}),Object(u.jsxs)("p",{children:["Meanwhile, just hold the thought, or even better...pen it down maybe?"," ",Object(u.jsx)("br",{}),"The more cheesy, the better you make the other person feel :P"]}),Object(u.jsx)("img",{src:"/images/girl-writing.jpg",alt:"Illustration"})]})}}]),a}(r.Component),m=a(21),b=a(4),g=a.n(b),p=a(11),f=a(7),x=a(25),O=a(23),v="https://www.webug.space",w=a.n(O).a.create({baseURL:"".concat(v,"/api")});a(55);function y(e){var t=e.mail,a=e.message,r=e.images;return Object(u.jsxs)("div",{class:"wrapper",children:[Object(u.jsxs)("div",{class:"wrapper-inner",children:[Object(u.jsx)("table",{class:"outer-table"}),Object(u.jsx)("table",{class:"border-top"}),Object(u.jsx)("table",{class:"main-table-first",children:Object(u.jsx)("tr",{children:Object(u.jsxs)("td",{class:"two-column",children:[Object(u.jsx)("div",{class:"prev-section",children:Object(u.jsx)("img",{src:"https://i.imgur.com/8P1impU.png",height:"",alt:"alt_text",border:"0",style:{width:"100%",maxWidth:"200px",fontFamily:"sans-serif",color:"#555555",display:"block"}})}),Object(u.jsx)("div",{class:"prev-section",children:Object(u.jsx)("img",{src:"https://i.imgur.com/3aDWXWv.png",height:"",alt:"alt_text",border:"0",style:{width:"200%",height:"auto",fontFamily:"sans-serif",color:"#555555",display:"block"}})}),Object(u.jsx)("p",{style:{fontSize:"x-large",fontFamily:"Gabriola",textAlign:"start",padding:"10%",whiteSpace:"pre-wrap"},children:a}),r.map((function(e){return Object(u.jsx)("div",{children:Object(u.jsx)("img",{src:"".concat(v,"/media/postcard_images/").concat(e),height:"auto",alt:"alt_text",border:"0",style:{marginLeft:"auto",marginRight:"auto",marginBottom:20,maxWidth:500}})})})),Object(u.jsx)("div",{children:Object(u.jsx)("img",{src:"https://i.imgur.com/Gnotz4l.png",height:"",alt:"alt_text",border:"0",style:{width:"100%",maxWidth:"200px",fontFamily:"sans-serif",color:"#555555",display:"block",textAlign:"right",float:"right"}})})]})})})]}),Object(u.jsxs)("p",{className:"preview-text",children:["Preview ",Object(u.jsx)("br",{}),"This is how ",t||"(s)he"," will receive the gratitude...\ud83d\ude48"]})]})}var k=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).handleChange=function(t){e.setState(Object(f.a)({},t.target.id,t.target.value))},e.getHash=function(){var e=Object(p.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t.map((function(e){var t=new FormData;return t.append("image",e,e.name),w.post("".concat(v,"/api/add_image/"),t).then((function(e){return e.data.split("/")[3]}))}))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.handleImageChange=function(t){var a=t.target.files,r=e.state.images;e.getHash(Array.from(a)).then((function(t){return e.setState({images:r.concat(t)})}))},e.submitPostData=Object(p.a)(g.a.mark((function t(){var a,r,i,n,s,c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.state,r=a.message,i=a.mail,n=a.images,s={message:r,mail:i,images:n.join(",")},c=e.recaptchaRef.current.getValue(),e.setState({error:i?r.length||n.length?c?"":"Sorry, we are not taking response from robots yet!":"Atleast one of the message/images field is required":"Receiver's mail is required."},(function(){e.state.error||e.setState({loading:!0},(function(){w.post("".concat(v,"/api/add_post/"),s).then((function(){e.clearForm(),e.setState({completed:!0})})).catch((function(t){var a;e.setState({error:null!==(a=null===t||void 0===t?void 0:t.message)&&void 0!==a?a:t}),alert(t)})).finally((function(){return e.setState({loading:!1})}))}))}));case 4:case"end":return t.stop()}}),t)}))),e.clearForm=function(){e.setState({mail:"",message:"",error:"",loading:!1,images:[]})},e.state={mail:"",message:"",error:"",loading:!1,images:[]},e.hiddenFileInput=i.a.createRef(null),e.recaptchaRef=i.a.createRef(null),e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state,t=e.mail,a=e.error,r=e.message,i=e.loading,n=e.images,s=e.completed;return Object(u.jsxs)(u.Fragment,{children:[s?Object(u.jsx)("p",{className:"preview-text",children:"You have posted your gratitude, leave the rest to us... \ud83e\udd73"}):Object(u.jsxs)("div",{className:"form-page",children:[Object(u.jsxs)("div",{id:"form",children:[Object(u.jsxs)("div",{className:"card",children:[Object(u.jsx)("input",{required:!0,type:"email",autoComplete:"off",id:"mail",value:t,onChange:this.handleChange,placeholder:"Receiver's mail"}),Object(u.jsx)("div",{className:"divider"}),Object(u.jsx)("textarea",{type:"text",id:"message",autoComplete:"off",value:r,onChange:this.handleChange,placeholder:"Pour your heart out!"})]}),Object(u.jsx)("label",{htmlFor:"image",id:"img-button",children:"Upload Images"}),Object(u.jsxs)("p",{children:["Want to add a group photo or a handwritten letter?",Object(u.jsx)("br",{}),"We got you covered \ud83d\ude09"]}),Object(u.jsx)("input",{type:"file",id:"image",accept:"image/*",multiple:!0,ref:this.hiddenFileInput,onChange:this.handleImageChange,hidden:!0}),Object(u.jsx)("div",{className:"row flex center",style:{margin:"2rem 0"},children:n.map((function(e){return Object(u.jsx)("img",{src:"".concat(v,"/media/postcard_images/").concat(e),alt:e,style:{margin:"0 2rem",height:200}})}))}),Object(u.jsx)("div",{className:"divider"}),Object(u.jsx)(x.a,{sitekey:"6LfJ0WMaAAAAAO9K5Lj8DrYFLfR2bAwav1-w_XQs",onChange:this.recaptcha,ref:this.recaptchaRef}),a&&Object(u.jsx)("p",{id:"error-para",children:a}),Object(u.jsxs)("div",{children:[Object(u.jsx)("button",{id:"submit",disabled:i,onClick:this.submitPostData,children:"Send"}),Object(u.jsx)("button",{id:"clear",onClick:this.clearForm,children:"Clear"})]}),Object(u.jsx)("div",{className:"divider"})]}),Object(u.jsx)(y,Object(m.a)({},this.state))]}),Object(u.jsxs)("p",{className:"preview-text",children:["For assistance/queries reachout to"," ",Object(u.jsx)("a",{href:"mailto:tawatia.1@iitj.ac.in",target:"_blank",rel:"noreferrer",children:"Kunal,"})," ",Object(u.jsx)("a",{href:"mailto:jain.38@iitj.ac.in",target:"_blank",rel:"noreferrer",children:"Darshit,"})," ",Object(u.jsx)("a",{href:"mailto:raghav.1@iitj.ac.in",target:"_blank",rel:"noreferrer",children:"Abhishek,"})," ","and"," ",Object(u.jsx)("a",{href:"mailto:singh.81@iitj.ac.in",target:"_blank",rel:"noreferrer",children:"Sandesh"})," "]})]})}}]),a}(r.Component);var C=function(){var e=Object(r.useState)(Date.now()),t=Object(c.a)(e,2),a=t[0],i=t[1];return Object(r.useEffect)((function(){console.log("timer set!");var e=setInterval((function(){i(Date.now())}),1e3);return function(){return clearInterval(e)}}),[]),Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)("h1",{children:"Gratitude Day"}),a<Date.parse("2021-02-26 18:00:00")?Object(u.jsx)(j,{}):Object(u.jsx)(k,{})]})};s.a.render(Object(u.jsx)(i.a.StrictMode,{children:Object(u.jsx)(C,{})}),document.getElementById("root"))}},[[56,1,2]]]);
//# sourceMappingURL=main.eb8c8bb5.chunk.js.map