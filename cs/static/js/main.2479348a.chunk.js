(this["webpackJsonpgratitude-day"]=this["webpackJsonpgratitude-day"]||[]).push([[0],{29:function(e,t,a){},53:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var r=a(1),i=a.n(r),s=a(16),n=a.n(s),c=(a(29),a(17)),l=a(4),o=a.n(l),d=a(7),h=a(5),j=a(18),m=a(19),u=a(24),g=a(22),b=a(23),p=a(21),f="https://www.webug.space",x=a.n(p).a.create({baseURL:"".concat(f,"/api")}),O=(a(53),a(0));function v(e){var t=e.mail,a=e.message,r=e.images;return Object(O.jsxs)("div",{class:"wrapper",children:[Object(O.jsxs)("div",{class:"wrapper-inner",children:[Object(O.jsx)("table",{class:"outer-table"}),Object(O.jsx)("table",{class:"border-top"}),Object(O.jsx)("table",{class:"main-table-first",children:Object(O.jsx)("tr",{children:Object(O.jsxs)("td",{class:"two-column",children:[Object(O.jsx)("div",{class:"prev-section",children:Object(O.jsx)("img",{src:"https://i.imgur.com/8P1impU.png",height:"",alt:"alt_text",border:"0",style:{width:"100%",maxWidth:"200px",fontFamily:"sans-serif",color:"#555555",display:"block"}})}),Object(O.jsx)("div",{class:"prev-section",children:Object(O.jsx)("img",{src:"https://i.imgur.com/3aDWXWv.png",height:"",alt:"alt_text",border:"0",style:{width:"200%",height:"auto",fontFamily:"sans-serif",color:"#555555",display:"block"}})}),Object(O.jsx)("p",{style:{fontSize:"x-large",fontFamily:"Gabriola",textAlign:"start",padding:"10%",whiteSpace:"pre-wrap"},children:a}),r.map((function(e){return Object(O.jsx)("div",{children:Object(O.jsx)("img",{src:"".concat(f,"/media/postcard_images/").concat(e),height:"auto",alt:"alt_text",border:"0",style:{marginLeft:"auto",marginRight:"auto",marginBottom:20,maxWidth:500}})})})),Object(O.jsx)("div",{children:Object(O.jsx)("img",{src:"https://i.imgur.com/Gnotz4l.png",height:"",alt:"alt_text",border:"0",style:{width:"100%",maxWidth:"200px",fontFamily:"sans-serif",color:"#555555",display:"block",textAlign:"right",float:"right"}})})]})})})]}),Object(O.jsxs)("p",{className:"preview-text",children:["Preview ",Object(O.jsx)("br",{}),"This is how ",t||"(s)he"," will receive the gratitude...\ud83d\ude48"]})]})}var w=function(e){Object(u.a)(a,e);var t=Object(g.a)(a);function a(){var e;return Object(j.a)(this,a),(e=t.call(this)).handleChange=function(t){e.setState(Object(h.a)({},t.target.id,t.target.value))},e.getHash=function(){var e=Object(d.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t.map((function(e){var t=new FormData;return t.append("image",e,e.name),x.post("".concat(f,"/api/add_image/"),t).then((function(e){return e.data.split("/")[3]}))}))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.handleImageChange=function(t){var a=t.target.files,r=e.state.images;e.getHash(Array.from(a)).then((function(t){return e.setState({images:r.concat(t)})}))},e.submitPostData=Object(d.a)(o.a.mark((function t(){var a,r,i,s,n,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.state,r=a.message,i=a.mail,s=a.images,n={message:r,mail:i,images:s.join(",")},c=e.recaptchaRef.current.getValue(),e.setState({error:i?r.length||s.length?c?"":"Sorry, we are not taking response from robots yet!":"Atleast one of the message/images field is required":"Receiver's mail is required."},(function(){e.state.error||e.setState({loading:!0},(function(){x.post("".concat(f,"/api/add_post/"),n).then((function(){e.clearForm(),e.setState({completed:!0})})).catch((function(t){var a;e.setState({error:null!==(a=null===t||void 0===t?void 0:t.message)&&void 0!==a?a:t}),alert(t)})).finally((function(){return e.setState({loading:!1})}))}))}));case 4:case"end":return t.stop()}}),t)}))),e.clearForm=function(){e.setState({mail:"",message:"",error:"",loading:!1,images:[]})},e.state={mail:"",message:"",error:"",loading:!1,images:[]},e.hiddenFileInput=i.a.createRef(null),e.recaptchaRef=i.a.createRef(null),e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.state,t=e.mail,a=e.error,r=e.message,i=e.loading,s=e.images,n=e.completed;return Object(O.jsxs)(O.Fragment,{children:[n?Object(O.jsx)("p",{className:"preview-text",children:"You have posted your gratitude, leave the rest to us... \ud83e\udd73"}):Object(O.jsxs)("div",{className:"form-page",children:[Object(O.jsxs)("div",{id:"form",children:[Object(O.jsxs)("div",{className:"card",children:[Object(O.jsx)("input",{required:!0,type:"email",autoComplete:"off",id:"mail",value:t,onChange:this.handleChange,placeholder:"Receiver's mail"}),Object(O.jsx)("div",{className:"divider"}),Object(O.jsx)("textarea",{type:"text",id:"message",autoComplete:"off",value:r,onChange:this.handleChange,placeholder:"Pour your heart out!"})]}),Object(O.jsx)("label",{htmlFor:"image",id:"img-button",children:"Upload Images"}),Object(O.jsxs)("p",{children:["Want to add a group photo or a handwritten letter?",Object(O.jsx)("br",{}),"We got you covered \ud83d\ude09"]}),Object(O.jsx)("input",{type:"file",id:"image",accept:"image/*",multiple:!0,ref:this.hiddenFileInput,onChange:this.handleImageChange,hidden:!0}),Object(O.jsx)("div",{className:"row flex center",style:{margin:"2rem 0"},children:s.map((function(e){return Object(O.jsx)("img",{src:"".concat(f,"/media/postcard_images/").concat(e),alt:e,style:{margin:"0 2rem",height:200}})}))}),Object(O.jsx)("div",{className:"divider"}),Object(O.jsx)(b.a,{sitekey:"6LfJ0WMaAAAAAO9K5Lj8DrYFLfR2bAwav1-w_XQs",onChange:this.recaptcha,ref:this.recaptchaRef}),a&&Object(O.jsx)("p",{id:"error-para",children:a}),Object(O.jsxs)("div",{children:[Object(O.jsx)("button",{id:"submit",disabled:i,onClick:this.submitPostData,children:"Send"}),Object(O.jsx)("button",{id:"clear",onClick:this.clearForm,children:"Clear"})]}),Object(O.jsx)("div",{className:"divider"})]}),Object(O.jsx)(v,Object(c.a)({},this.state))]}),Object(O.jsxs)("p",{className:"preview-text",children:["For assistance/queries reachout to"," ",Object(O.jsx)("a",{href:"mailto:tawatia.1@iitj.ac.in",target:"_blank",rel:"noreferrer",children:"Kunal,"})," ",Object(O.jsx)("a",{href:"mailto:jain.38@iitj.ac.in",target:"_blank",rel:"noreferrer",children:"Darshit,"})," ",Object(O.jsx)("a",{href:"mailto:raghav.1@iitj.ac.in",target:"_blank",rel:"noreferrer",children:"Abhishek,"})," ","and"," ",Object(O.jsx)("a",{href:"mailto:singh.81@iitj.ac.in",target:"_blank",rel:"noreferrer",children:"Sandesh"})," "]})]})}}]),a}(r.Component);var y=function(){return Object(O.jsxs)("div",{className:"App",children:[Object(O.jsx)("h1",{children:"Gratitude Day"}),Object(O.jsx)(w,{})]})};n.a.render(Object(O.jsx)(i.a.StrictMode,{children:Object(O.jsx)(y,{})}),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.2479348a.chunk.js.map